---
interface Props {
    title: string;
    description?: string;
}

const {
    title,
    description = "Browse and explore IATA NDC (New Distribution Capability) XML schemas. Documentation for airline distribution standards.",
} = Astro.props;
import "../styles/global.css";
import PostHog from "../components/posthog.astro";
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content={description} />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>
        <PostHog />
        <script is:inline>
            // theme-init.js
            (function () {
                const storedTheme = localStorage.getItem("theme");
                const systemDark = window.matchMedia(
                    "(prefers-color-scheme: dark)",
                ).matches;

                let theme = "light";
                if (storedTheme) {
                    theme = storedTheme;
                } else if (systemDark) {
                    theme = "dark";
                }

                document.documentElement.setAttribute("data-theme", theme);

                // Initialize the toggle state after DOM load
                document.addEventListener("DOMContentLoaded", () => {
                    const toggle = document.querySelector(".theme-controller");
                    if (toggle) {
                        toggle.checked = theme === "dark";

                        toggle.addEventListener("change", (e) => {
                            const newTheme = e.target.checked
                                ? "dark"
                                : "light";
                            document.documentElement.setAttribute(
                                "data-theme",
                                newTheme,
                            );
                            localStorage.setItem("theme", newTheme);
                        });
                    }
                });
            })();
        </script>
        <slot name="head" />
    </head>
    <body
        class="h-dvh flex flex-col bg-base-100 text-base-content overflow-hidden font-sans"
    >
        <div class="drawer lg:drawer-open h-full">
            <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />

            <div class="drawer-content flex flex-col h-full overflow-hidden">
                <!-- Top Navigation -->
                <div
                    class="navbar bg-base-100 border-b border-base-200 h-16 flex-none z-10 w-full"
                >
                    <div class="flex-none lg:hidden">
                        <label
                            for="my-drawer-2"
                            aria-label="open sidebar"
                            class="btn btn-square btn-ghost"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="none"
                                viewBox="0 0 24 24"
                                class="inline-block w-6 h-6 stroke-current"
                                ><path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M4 6h16M4 12h16M4 18h16"></path></svg
                            >
                        </label>
                    </div>
                    <div class="flex-1">
                        <a
                            href="/"
                            class="btn btn-ghost text-xl normal-case gap-2"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-6 w-6 text-primary"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                                ><path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"
                                ></path></svg
                            >
                            NDC Clearance
                        </a>
                    </div>
                    <div class="flex-none gap-2">
                        <label
                            class="swap swap-rotate btn btn-ghost btn-circle"
                        >
                            <!-- this hidden checkbox controls the state -->
                            <input
                                type="checkbox"
                                class="theme-controller"
                                value="dark"
                            />

                            <!-- sun icon -->
                            <svg
                                class="swap-on fill-current w-5 h-5"
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                ><path
                                    d="M5.64,17l-.71.71a1,1,0,0,0,0,1.41,1,1,0,0,0,1.41,0l.71-.71A1,1,0,0,0,5.64,17ZM5,12a1,1,0,0,0-1-1H3a1,1,0,0,0,0,2H4A1,1,0,0,0,5,12Zm7-7a1,1,0,0,0,1-1V3a1,1,0,0,0-2,0V4A1,1,0,0,0,12,5ZM5.64,7.05a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,1,0,5.64,7.05Zm12,1.41a1,1,0,0,0,.7-.29l.71-.71a1,1,0,1,0-1.41-1.41l-.71.71A1,1,0,0,0,17.66,8.46Zm-1.29,8.66a1,1,0,0,0-.7.29,1,1,0,0,0,0,1.41l.71.71a1,1,0,0,0,1.41,0,1,1,0,0,0,0-1.41l-.71-.71A1,1,0,0,0,16.37,17.12ZM19,12a1,1,0,0,0,1-1h1a1,1,0,0,0,0,2H20A1,1,0,0,0,19,12Zm-7,7a1,1,0,0,0-1,1v1a1,1,0,0,0,2,0V20A1,1,0,0,0,12,19ZM12,8a4,4,0,1,0,4,4A4,4,0,0,0,12,8Z"
                                ></path></svg
                            >

                            <!-- moon icon -->
                            <svg
                                class="swap-off fill-current w-5 h-5"
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                ><path
                                    d="M21.64,13a1,1,0,0,0-1.05-.14,8.05,8.05,0,0,1-3.37.73A8.15,8.15,0,0,1,9.08,5.49a8.59,8.59,0,0,1,.25-2A1,1,0,0,0,8,2.36,10.14,10.14,0,1,0,22,14.05,1,1,0,0,0,21.64,13Zm-9.5,6.69A8.14,8.14,0,0,1,7.08,5.22v.27A10.15,10.15,0,0,0,17.22,15.63a9.79,9.79,0,0,0,2.1-.22A8.11,8.11,0,0,1,12.14,19.73Z"
                                ></path></svg
                            >
                        </label>
                        <a
                            class="btn btn-sm"
                            href="https://github.com/galuszkak/ndc-clearance"
                            target="_blank">GitHub</a
                        >
                    </div>
                </div>

                <!-- Central Workspace -->
                <main
                    class="flex-1 bg-base-200/50 relative overflow-hidden flex flex-col"
                >
                    <div class="h-full overflow-y-auto p-6">
                        <slot />
                    </div>
                </main>
            </div>

            <div class="drawer-side z-20">
                <label
                    for="my-drawer-2"
                    aria-label="close sidebar"
                    class="drawer-overlay"></label>
                <div
                    class="w-80 bg-base-100 border-r border-base-200 flex flex-col h-full overflow-hidden min-h-full"
                >
                    <div class="p-4 flex-none border-b border-base-200/50">
                        <a
                            href="/"
                            class="flex items-center gap-2 font-bold text-xs uppercase tracking-wider opacity-60 hover:opacity-100 transition-opacity"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="h-4 w-4"
                                fill="none"
                                viewBox="0 0 24 24"
                                stroke="currentColor"
                                ><path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                                ></path></svg
                            >
                            Dashboard
                        </a>
                    </div>

                    <div class="flex-1 overflow-hidden pointer-events-auto">
                        <slot name="sidebar-content" />
                    </div>

                    <div
                        class="divider mx-4 flex-none m-0 shadow-sm opacity-50"
                    >
                    </div>
                    <div class="flex-none max-h-48 overflow-y-auto">
                        <slot name="sidebar-widgets" />
                    </div>

                    <!-- Disclaimer -->
                    <div
                        class="p-4 border-t border-base-200/50 bg-base-50 text-[10px] text-base-content/40 leading-tight"
                    >
                        <p>
                            <strong>NDC Clearance</strong> is an independent tool
                            and is not affiliated with, endorsed by, or connected
                            to the International Air Transport Association (IATA).
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
