{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://schemas.prod.digitalcredentials.iata.org/visa.json",
  "title": "Visa",
  "description": "Verifiable Credential for a Visa.",
  "type": "object",
  "required": [
    "@context",
    "type",
    "issuer",
    "issuanceDate",
    "expirationDate",
    "credentialSubject",
    "credentialSchema"
  ],
  "properties": {
    "@context": {
      "type": "array",
      "minItems": 2,
      "uniqueItems": true,
      "prefixItems": [
        {
          "const": "https://www.w3.org/2018/credentials/v1"
        },
        {
          "const": "https://schemas.prod.digitalcredentials.iata.org/contexts/iata_credential.jsonld"
        }
      ],
      "items": {
        "type": "string",
        "format": "uri"
      }
    },
    "id": {
      "type": "string",
      "format": "uri"
    },
    "type": {
      "type": "array",
      "minItems": 3,
      "maxItems": 3,
      "prefixItems": [
        {
          "const": "VerifiableCredential"
        },
        {
          "const": "IATACredential"
        },
        {
          "const": "Visa"
        }
      ]
    },
    "issuer": {
      "type": "string",
      "format": "uri"
    },
    "issuanceDate": {
      "type": "string",
      "format": "date-time"
    },
    "expirationDate": {
      "type": "string",
      "format": "date-time"
    },
    "credentialSubject": {
      "type": "object",
      "properties": {
        "id": {
          "title": "ID",
          "type": "string",
          "format": "uri",
          "description": "DID of the subject."
        },
        "visa": {
          "title": "Visa",
          "description": "An official entry in a Passport or other Travel Document made by an official of a government to indicate that the bearer has been granted authority to enter or re-enter the country or region concerned.",
          "type": "object",
          "required": [
            "authorizationBinaryObject",
            "birthdate",
            "capturedVisaPicture",
            "docName",
            "docNumberIdentifier",
            "genderCode",
            "holdersName",
            "issuerName",
            "natlText",
            "validUntilDate"
          ],
          "properties": {
            "authorizationBinaryObject": {
              "title": "Visa Authorization Binary Object",
              "description": "Contains a signature or other form of Authorization.",
              "type": "string",
              "format": "uri"			  
            },
            "birthdate": {
              "title": "Visa Birthdate",
              "description": "Date of birth of the holder of the Visa. Reference: Digital Travel Authorisations Version 2.15 | June 2021 ISO/IEC JTC1 SC17 WG3/TF1 https://www.icao.int/Security/FAL/TRIP/PublishingImages/Pages/Publications/Digital%20Travel%20Authorizations.%20%28New%29.pdf.",
              "type": "string",
              "format": "date"
            },
            "capturedVisaPicture": {
              "title": "Visa Captured Visa Picture",
              "description": "Image of the holder of the Visa.",
              "type": "string",
              "format": "uri"			  
            },
            "docName": {
              "title": "Visa Document Name",
              "description": "Word or phrase, in the language of the issuing State, for the Visa document which confers on the holder that State's authority to travel to a port of entry in its territory. For example: the word for 'passport' in the language of the issuing State or organization, plus either PASSPORT (English), PASSEPORT (French) or PASAPORTE (Spanish) if the language of the issuing State or organization is not English, French or Spanish. Reference: Visa Document Name Doc 9303 ICAO Machine readable Travel Documents 8th Edition 2021 https://www.icao.int/publications/Documents/9303_p4_cons_en.pdf.",
              "type": "string",
              "maxLength": 13
            },
            "docNumberIdentifier": {
              "title": "Visa Document Number Identifier",
              "description": "An identifier given by the issuing State or organization to uniquely identify the document from all other official travel documents issued by the State or organization. For additional details see Doc 9303-7. Reference: Doc 9303 ICAO Machine readable Travel Documents 8th Edition 2021 https://www.icao.int/publications/Documents/9303_p7_cons_en.pdf Digital Travel Authorizations Version 2.15 June 2021 ISO/IEC JTC1 SC17 WG3/TF1 https://www.icao.int/Security/FAL/TRIP/PublishingImages/Pages/Publications/Digital%20Travel%20Authorizations.%20%28New%29.pdf.",
              "type": "string",
              "maxLength": 35
            },
            "genderCode": {
              "title": "Digital Travel Authorisation Gender Code",
              "description": "Gender of the individual (Typically, M, F or X for unspecified).",
              "type": "string",
              "minLength": 1,
              "maxLength": 1
            },
            "holdersName": {
              "title": "Visa Holders Name",
              "description": "Family name and given name(s) of the holder as it appears on the official travel document. Reference: Official Travel Document Holders Name (REFD) Digital Travel Authorizations Version 2.15 June 2021 ISO/IEC JTC1 SC17 WG3/TF1 https://www.icao.int/Security/FAL/TRIP/PublishingImages/Pages/Publications/Digital%20Travel%20Authorizations.%20%28New%29.pdf.",
              "type": "string",
              "minLength": 1,
              "maxLength": 64
            },
            "issuerName": {
              "title": "Visa Issuer Name",
              "description": "Name of the State or Organization responsible for the issuance of the Visa. Reference: Visa Issuer Name Doc 9303 ICAO Machine readable Travel Documents 8th Edition 2021 https://www.icao.int/publications/Documents/9303_p4_cons_en.pdf.",
              "type": "string",
              "maxLength": 13
            },
            "natlText": {
              "title": "Visa Nationality Text",
              "description": "The nationality of the holder of the Visa. Reference: Digital Travel Authorizations Version 2.15 June 2021 ISO/IEC JTC1 SC17 WG3/TF1 https://www.icao.int/Security/FAL/TRIP/PublishingImages/Pages/Publications/Digital%20Travel%20Authorizations.%20%28New%29.pdf.",
              "type": "string"
            },
            "optionalDataElementsText": {
              "title": "Optional Data Elements",
              "description": "A structured field for proprietry use by the state issuer of the Visa. See section 4.2.2.2 Data structure of the lower machine readable line of Doc 9303, Machine Readable Travel Documents, Part 7 - Machine Readable Visas.",
              "type": "string",
			  "minLength": 16,			  
			  "maxLength": 16
            },			
            "validUntilDate": {
              "title": "Visa Valid Until Date",
              "description": "In most cases this will be the date of expiry of the authorization and indicates the last day on which the Visa can be used. For some States this will be the date by or on which the holder should have left the country concerned. For date format, refer to 9303-3 Reference: as DTA https://www.icao.int/Security/FAL/TRIP/PublishingImages/Pages/Publications/Digital%20Travel%20Authorizations.%20%28New%29.pdf Digital Travel Authorisations Version 2.15 | June 2021 ISO/IEC JTC1 SC17 WG3/TF1.",
              "type": "string",
              "format": "date"
            },
            "visibleDigitalSealBinaryObject": {
              "title": "Visa Visible Digital Seal Binary Object",
              "description": "Visible Digital Seal for non-electronic documents. Reference: https://www.icao.int/Security/FAL/TRIP/Documents/TR%20-%20Visible%20Digital%20Seals%20for%20Non-Electronic%20Documents%20V1.7.pdf.",
              "type": "string",
              "format": "uri"			  
            }
		  }
        }
      },
      "required": [
        "id",
        "visa"
      ],
      "additionalProperties": false
    },
    "credentialSchema": {
      "type": "object",
      "required": [
        "id",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uri",
          "const": "https://schemas.prod.digitalcredentials.iata.org/visa.json"
        },
        "type": {
          "type": "string",
          "const": "JsonSchemaValidator2018"
        }
      },
      "additionalProperties": false
    }
  }
}